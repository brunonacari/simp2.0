    /* ============================================
   TRATAMENTO EM LOTE - CSS
   ============================================ */
    .page-container {
        padding: 20px;
        max-width: 1600px;
        margin: 0 auto;
    }

    /* Header */
    .page-header {
        background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
        border-radius: 14px;
        padding: 20px 24px;
        margin-bottom: 20px;
        color: white;
    }

    .page-header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 12px;
    }

    .page-header-info {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .page-header-icon {
        width: 42px;
        height: 42px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }

    .page-header h1 {
        font-size: 18px;
        font-weight: 700;
        margin: 0 0 2px 0;
    }

    .page-header p {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.7);
        margin: 0;
    }

    .header-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }

    .btn-header {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 14px;
        background: rgba(255, 255, 255, 0.15);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all .2s;
    }

    .btn-header:hover {
        background: rgba(255, 255, 255, 0.25);
    }

    .btn-header.primary {
        background: rgba(34, 197, 94, 0.3);
        border-color: rgba(34, 197, 94, 0.5);
    }

    .btn-header.danger {
        background: rgba(239, 68, 68, 0.3);
        border-color: rgba(239, 68, 68, 0.5);
    }

    /* Stats Cards */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
    }

    .stat-card {
        background: white;
        border-radius: 12px;
        padding: 16px 20px;
        border: 1px solid #e2e8f0;
        display: flex;
        align-items: center;
        gap: 14px;
        transition: all .2s;
    }

    .stat-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        transform: translateY(-1px);
    }

    .stat-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        flex-shrink: 0;
    }

    .stat-icon.pendentes {
        background: #fef3c7;
        color: #d97706;
    }

    .stat-icon.tratadas {
        background: #dcfce7;
        color: #16a34a;
    }

    .stat-icon.tecnicas {
        background: #dbeafe;
        color: #2563eb;
    }

    .stat-icon.operacionais {
        background: #fee2e2;
        color: #dc2626;
    }

    .stat-icon.confianca {
        background: #f3e8ff;
        color: #7c3aed;
    }

    .stat-icon.pontos {
        background: #e0f2fe;
        color: #0284c7;
    }

    .stat-info h3 {
        font-size: 22px;
        font-weight: 700;
        color: #0f172a;
        margin: 0;
        line-height: 1;
    }

    .stat-info p {
        font-size: 11px;
        color: #64748b;
        margin: 2px 0 0;
    }

    /* Filtros */
    .filtros-card {
        background: white;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        padding: 16px 20px;
        margin-bottom: 16px;
    }

    .filtros-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
        gap: 8px;
    }

    .filtros-header h3 {
        font-size: 13px;
        font-weight: 600;
        color: #334155;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    /* Grid de filtros — 4 colunas no desktop, 7 campos */
    .filtros-grid {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 10px;
        margin-top: 12px;
    }

    /* Busca ocupa 2 colunas para equilibrar a 2a linha (3 campos + busca larga) */
    .filtros-grid .form-group:last-child {
        grid-column: span 2;
    }

    @media (max-width: 992px) {
        .filtros-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .filtros-grid .form-group:last-child {
            grid-column: span 2;
        }
    }

    @media (max-width: 576px) {
        .filtros-grid {
            grid-template-columns: 1fr;
        }

        .filtros-grid .form-group:last-child {
            grid-column: span 1;
        }
    }

    .form-group label {
        display: block;
        font-size: 11px;
        font-weight: 600;
        color: #64748b;
        margin-bottom: 4px;
        text-transform: uppercase;
        letter-spacing: 0.3px;
    }

    .form-control {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 13px;
        background: white;
        transition: all .2s;
        box-sizing: border-box;
    }

    .form-control:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .filtros-actions {
        display: flex;
        gap: 8px;
        align-items: end;
    }

    .btn-filtrar {
        padding: 8px 16px;
        background: linear-gradient(135deg, #1e3a5f, #2d5a87);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        white-space: nowrap;
        transition: all .2s;
    }

    .btn-filtrar:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(30, 58, 95, 0.3);
    }

    .btn-limpar {
        padding: 8px 12px;
        background: #f1f5f9;
        color: #475569;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 12px;
        cursor: pointer;
        white-space: nowrap;
        transition: all .2s;
    }

    .btn-limpar:hover {
        background: #e2e8f0;
    }

    /* Barra de acoes em massa */
    .massa-bar {
        display: none;
        background: #eff6ff;
        border: 1px solid #bfdbfe;
        border-radius: 10px;
        padding: 10px 16px;
        margin-bottom: 12px;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
    }

    .massa-bar.ativa {
        display: flex;
    }

    .massa-bar .sel-count {
        font-size: 13px;
        font-weight: 600;
        color: #1e40af;
    }

    .btn-massa {
        padding: 6px 14px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        border: 1px solid transparent;
        transition: all .2s;
    }

    .btn-massa.aprovar {
        background: #dcfce7;
        color: #166534;
        border-color: #bbf7d0;
    }

    .btn-massa.aprovar:hover {
        background: #bbf7d0;
    }

    .btn-massa.ignorar {
        background: #fee2e2;
        color: #991b1b;
        border-color: #fecaca;
    }

    .btn-massa.ignorar:hover {
        background: #fecaca;
    }

    .btn-massa.limpar {
        background: #f1f5f9;
        color: #475569;
        border-color: #e2e8f0;
    }

    /* Tabela */
    .tabela-card {
        background: white;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        overflow: hidden;
    }

    .tabela-header {
        padding: 12px 20px;
        border-bottom: 1px solid #e2e8f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #f8fafc;
    }

    .tabela-header h3 {
        font-size: 13px;
        font-weight: 600;
        color: #334155;
        margin: 0;
    }

    .tabela-info {
        font-size: 11px;
        color: #94a3b8;
    }

    .tabela-wrapper {
        overflow-x: auto;
    }

    table.tbl-tratamento {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
    }

    table.tbl-tratamento thead th {
        padding: 10px 12px;
        background: #f8fafc;
        border-bottom: 2px solid #e2e8f0;
        font-weight: 600;
        color: #475569;
        text-align: left;
        white-space: nowrap;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.3px;
    }

    table.tbl-tratamento tbody td {
        padding: 10px 12px;
        border-bottom: 1px solid #f1f5f9;
        vertical-align: middle;
    }

    table.tbl-tratamento tbody tr:hover {
        background: #f8fafc;
    }

    table.tbl-tratamento tbody tr.selecionada {
        background: #eff6ff;
    }

    /* Checkbox */
    .chk-sel {
        width: 16px;
        height: 16px;
        cursor: pointer;
        accent-color: #3b82f6;
    }

    /* Badges */
    .badge {
        display: inline-flex;
        align-items: center;
        gap: 3px;
        padding: 3px 8px;
        border-radius: 100px;
        font-size: 10px;
        font-weight: 600;
        white-space: nowrap;
    }

    .badge.critica {
        background: #fee2e2;
        color: #991b1b;
    }

    .badge.alta {
        background: #ffedd5;
        color: #9a3412;
    }

    .badge.media {
        background: #fef3c7;
        color: #92400e;
    }

    .badge.baixa {
        background: #f0fdf4;
        color: #166534;
    }

    .badge.tecnica {
        background: #dbeafe;
        color: #1e40af;
    }

    .badge.operacional {
        background: #fce7f3;
        color: #9d174d;
    }

    .badge.conf-alta {
        background: #dcfce7;
        color: #166534;
    }

    .badge.conf-confiavel {
        background: #dbeafe;
        color: #1e40af;
    }

    .badge.conf-atencao {
        background: #fef3c7;
        color: #92400e;
    }

    .badge.pendente {
        background: #fef3c7;
        color: #92400e;
    }

    .badge.aprovada {
        background: #dcfce7;
        color: #166534;
    }

    .badge.ajustada {
        background: #dbeafe;
        color: #1e40af;
    }

    .badge.ignorada {
        background: #f1f5f9;
        color: #64748b;
    }

    /* Acoes rapidas */
    .acoes-rapidas {
        display: flex;
        gap: 4px;
    }

    .btn-acao {
        width: 28px;
        height: 28px;
        border-radius: 6px;
        border: 1px solid #e2e8f0;
        background: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        transition: all .2s;
        color: #64748b;
    }

    .btn-acao:hover {
        transform: scale(1.1);
    }

    .btn-acao.aprovar:hover {
        background: #dcfce7;
        color: #16a34a;
        border-color: #86efac;
    }

    .btn-acao.ajustar:hover {
        background: #dbeafe;
        color: #2563eb;
        border-color: #93c5fd;
    }

    .btn-acao.ignorar:hover {
        background: #fee2e2;
        color: #dc2626;
        border-color: #fca5a5;
    }

    .btn-acao.detalhe:hover {
        background: #f3e8ff;
        color: #7c3aed;
        border-color: #c4b5fd;
    }

    /* Paginacao */
    .paginacao {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 20px;
        border-top: 1px solid #e2e8f0;
        flex-wrap: wrap;
        gap: 8px;
    }

    .paginacao-info {
        font-size: 12px;
        color: #64748b;
    }

    .paginacao-btns {
        display: flex;
        gap: 4px;
    }

    .btn-pag {
        padding: 6px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        background: white;
        font-size: 12px;
        cursor: pointer;
        transition: all .2s;
        color: #475569;
    }

    .btn-pag:hover {
        background: #f1f5f9;
        border-color: #3b82f6;
        color: #2563eb;
    }

    .btn-pag.ativa {
        background: #1e3a5f;
        color: white;
        border-color: #1e3a5f;
    }

    .btn-pag:disabled {
        opacity: 0.4;
        cursor: not-allowed;
    }

    /* Valor real vs sugerido */
    .valor-comparacao {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .vl-real {
        font-weight: 600;
        color: #dc2626;
        font-family: 'SF Mono', monospace;
        font-size: 12px;
    }

    .vl-sugerido {
        font-weight: 500;
        color: #16a34a;
        font-family: 'SF Mono', monospace;
        font-size: 11px;
    }

    .vl-sugerido::before {
        content: '→ ';
        color: #94a3b8;
    }

    /* Score bar */
    .score-bar {
        width: 60px;
        height: 6px;
        background: #e2e8f0;
        border-radius: 3px;
        overflow: hidden;
        display: inline-block;
        vertical-align: middle;
        margin-right: 4px;
    }

    .score-bar-fill {
        height: 100%;
        border-radius: 3px;
        transition: width .3s;
    }

    .score-bar-fill.alta {
        background: #22c55e;
    }

    .score-bar-fill.confiavel {
        background: #3b82f6;
    }

    .score-bar-fill.atencao {
        background: #eab308;
    }

    /* Prioridade hidraulica */
    .prioridade-icon {
        font-size: 14px;
        margin-right: 2px;
    }

    /* Empty state */
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #94a3b8;
    }

    .empty-state ion-icon {
        font-size: 48px;
        margin-bottom: 12px;
    }

    .empty-state h3 {
        font-size: 16px;
        color: #475569;
        margin: 0 0 4px;
    }

    .empty-state p {
        font-size: 13px;
        margin: 0;
    }

    /* Loading */
    .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid #e2e8f0;
        border-top-color: #3b82f6;
        border-radius: 50%;
        animation: spin .8s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* Modal */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9000;
        align-items: center;
        justify-content: center;
    }

    .modal-overlay.ativo {
        display: flex;
    }

    .modal-box {
        background: white;
        border-radius: 14px;
        width: 95%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .modal-header {
        padding: 16px 20px;
        border-bottom: 1px solid #e2e8f0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        background: white;
        z-index: 1;
    }

    .modal-header h3 {
        font-size: 15px;
        font-weight: 600;
        color: #0f172a;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .modal-close {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        background: #f1f5f9;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748b;
        transition: all .2s;
    }

    .modal-close:hover {
        background: #fee2e2;
        color: #dc2626;
    }

    .modal-body {
        padding: 20px;
    }

    .modal-footer {
        padding: 12px 20px;
        border-top: 1px solid #e2e8f0;
        display: flex;
        justify-content: flex-end;
        gap: 8px;
        position: sticky;
        bottom: 0;
        background: white;
    }

    .btn-modal {
        padding: 8px 18px;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        border: 1px solid transparent;
        transition: all .2s;
    }

    .btn-modal.cancelar {
        background: #f1f5f9;
        color: #475569;
        border-color: #e2e8f0;
    }

    .btn-modal.confirmar {
        background: linear-gradient(135deg, #1e3a5f, #2d5a87);
        color: white;
    }

    .btn-modal.confirmar:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(30, 58, 95, 0.3);
    }

    /* Detalhe - scores */
    .scores-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin: 12px 0;
    }

    .score-item {
        background: #f8fafc;
        border-radius: 8px;
        padding: 10px 14px;
    }

    .score-item label {
        font-size: 10px;
        color: #64748b;
        text-transform: uppercase;
        font-weight: 600;
        letter-spacing: 0.3px;
        display: block;
        margin-bottom: 4px;
    }

    .score-item .score-valor {
        font-size: 18px;
        font-weight: 700;
        color: #0f172a;
    }

    /* Reserva GNN */
    .gnn-placeholder {
        background: #f8fafc;
        border: 1px dashed #cbd5e1;
        border-radius: 10px;
        padding: 16px;
        text-align: center;
        color: #94a3b8;
        margin-top: 12px;
    }

    .gnn-placeholder ion-icon {
        font-size: 24px;
        display: block;
        margin: 0 auto 6px;
    }

    .gnn-placeholder p {
        font-size: 11px;
        margin: 0;
    }

    /* Tipo medidor icones */
    .tipo-medidor-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 500;
    }

    .tipo-medidor-badge.reservatorio {
        background: #dbeafe;
        color: #1e40af;
    }

    .tipo-medidor-badge.macro {
        background: #fef3c7;
        color: #92400e;
    }

    .tipo-medidor-badge.pitometrica {
        background: #fce7f3;
        color: #9d174d;
    }

    .tipo-medidor-badge.pressao {
        background: #e0f2fe;
        color: #0369a1;
    }

    .tipo-medidor-badge.hidrometro {
        background: #f0fdf4;
        color: #166534;
    }

    /* Textarea justificativa */
    .textarea-just {
        width: 100%;
        min-height: 80px;
        padding: 10px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 13px;
        resize: vertical;
        box-sizing: border-box;
        font-family: inherit;
    }

    .textarea-just:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    /* Input valor ajuste */
    .input-valor {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        font-family: 'SF Mono', monospace;
        box-sizing: border-box;
    }

    .input-valor:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    /* Info detalhe */
    .detalhe-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin-bottom: 12px;
    }

    .detalhe-item {
        padding: 8px 12px;
        background: #f8fafc;
        border-radius: 6px;
    }

    .detalhe-item label {
        font-size: 10px;
        color: #64748b;
        text-transform: uppercase;
        font-weight: 600;
        display: block;
        margin-bottom: 2px;
    }

    .detalhe-item span {
        font-size: 13px;
        font-weight: 500;
        color: #0f172a;
    }

    /* Select2 ajustes */
    .select2-container {
        width: 100% !important;
    }

    .select2-container .select2-selection--single {
        height: 36px !important;
        border: 1px solid #e2e8f0 !important;
        border-radius: 8px !important;
    }

    .select2-container .select2-selection--single .select2-selection__rendered {
        line-height: 36px !important;
        font-size: 13px;
        padding-left: 12px;
    }

    .select2-container .select2-selection--single .select2-selection__arrow {
        height: 36px !important;
    }

    .select2-dropdown {
        border-radius: 8px !important;
        border: 1px solid #e2e8f0 !important;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
    }

    .select2-search--dropdown .select2-search__field {
        border-radius: 6px !important;
        padding: 8px 10px !important;
    }

    .select2-container--open .select2-dropdown {
        z-index: 9999;
    }

    /* Responsivo */
    @media (max-width: 1024px) {
        .filtros-grid {
            grid-template-columns: repeat(3, 1fr);
        }

        .stats-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 768px) {
        .page-container {
            padding: 14px;
        }

        .page-header-content {
            flex-direction: column;
            align-items: stretch;
            text-align: center;
        }

        .header-actions {
            justify-content: center;
        }

        .filtros-grid {
            grid-template-columns: 1fr 1fr;
        }

        .stats-grid {
            grid-template-columns: 1fr 1fr;
        }

        .massa-bar {
            flex-direction: column;
            text-align: center;
        }

        .paginacao {
            flex-direction: column;
            text-align: center;
        }

        .detalhe-grid,
        .scores-grid {
            grid-template-columns: 1fr;
        }

        .modal-box {
            width: 98%;
            max-width: none;
            margin: 8px;
        }
    }

    @media (max-width: 480px) {
        .filtros-grid {
            grid-template-columns: 1fr;
        }

        .stats-grid {
            grid-template-columns: 1fr;
        }

        .filtros-actions {
            flex-direction: column;
        }

        .filtros-actions button {
            width: 100%;
            justify-content: center;
        }
    }

    /* Colunas ordenaveis */
    .th-sort {
        cursor: pointer;
        user-select: none;
        white-space: nowrap;
    }

    .th-sort:hover {
        color: #2563eb;
        background: #eff6ff;
    }

    .th-sort .sort-icon {
        font-size: 12px;
        vertical-align: middle;
        opacity: 0.4;
        margin-left: 2px;
    }

    .th-sort.asc .sort-icon,
    .th-sort.desc .sort-icon {
        opacity: 1;
        color: #2563eb;
    }

    /* Icone modelo treinado */
    .modelo-badge {
        display: inline-flex;
        align-items: center;
        gap: 2px;
        font-size: 10px;
        color: #16a34a;
        background: #f0fdf4;
        border: 1px solid #bbf7d0;
        padding: 1px 6px;
        border-radius: 4px;
        margin-left: 4px;
        vertical-align: middle;
    }

    .modelo-badge ion-icon {
        font-size: 11px;
    }

    /* Botao validacao */
    .btn-acao.validacao {
        background: #fffbeb;
        color: #b45309;
        border-color: #fde68a;
    }

    .btn-acao.validacao:hover {
        background: #fef3c7;
        color: #d97706;
        border-color: #fde68a;
    }

    /* Badge numerico de ordem de ordenacao multi-coluna */
    .sort-order {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: #2563eb;
        color: #fff;
        font-size: 9px;
        font-weight: 700;
        margin-left: 3px;
        vertical-align: middle;
    }

    /* Modal regras - padrao SIMP */
    .regra-tab {
        flex: 1;
        padding: 10px 16px;
        background: transparent;
        border: none;
        font-size: 13px;
        font-weight: 500;
        color: #64748b;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        transition: all .2s;
        border-bottom: 2px solid transparent;
        margin-bottom: -2px;
    }

    .regra-tab:hover {
        color: #1e3a5f;
        background: #eff6ff;
    }

    .regra-tab.active {
        color: #1e3a5f;
        font-weight: 600;
        border-bottom-color: #1e3a5f;
    }

    .regra-tab ion-icon {
        font-size: 16px;
    }

    .regra-secao {
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 1px solid #f1f5f9;
    }

    .regra-secao:last-child {
        border-bottom: none;
        margin-bottom: 0;
    }

    .regra-secao h4 {
        margin: 0 0 10px;
        font-size: 14px;
        color: #1e293b;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .regra-formula {
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 8px 14px;
        font-family: 'SF Mono', Consolas, monospace;
        font-size: 12px;
        color: #334155;
        margin-bottom: 12px;
        text-align: center;
        font-weight: 500;
    }

    .regra-tabela {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
    }

    .regra-tabela th {
        background: #f8fafc;
        color: #475569;
        font-weight: 600;
        text-align: left;
        padding: 8px 10px;
        border-bottom: 2px solid #e2e8f0;
    }

    .regra-tabela td {
        padding: 7px 10px;
        border-bottom: 1px solid #f1f5f9;
        color: #334155;
        vertical-align: top;
    }

    .regra-tabela tr:hover td {
        background: #f8fafc;
    }

    .regra-badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
    }

    .regra-badge.amarelo {
        background: #fef3c7;
        color: #92400e;
    }

    .regra-badge.vermelho {
        background: #fee2e2;
        color: #991b1b;
    }

    .regra-badge.azul {
        background: #dbeafe;
        color: #1e40af;
    }

    .regra-badge.roxo {
        background: #ede9fe;
        color: #5b21b6;
    }

    .regra-badge.verde {
        background: #dcfce7;
        color: #166534;
    }

    .regra-badge.laranja {
        background: #ffedd5;
        color: #9a3412;
    }

    .regra-badge.cinza {
        background: #f1f5f9;
        color: #475569;
    }

    .regra-badge-info {
        font-size: 11px;
        padding: 4px 10px;
        border-radius: 6px;
        font-weight: 500;
    }

    .regra-badge-info.verde {
        background: #dcfce7;
        color: #166534;
    }

    .regra-badge-info.azul {
        background: #dbeafe;
        color: #1e40af;
    }

    .regra-badge-info.amarelo {
        background: #fef3c7;
        color: #92400e;
    }

    /* Glossario */
    .glossario-item {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        margin-bottom: 10px;
        overflow: hidden;
        transition: all .2s;
    }

    .glossario-item:hover {
        border-color: #93c5fd;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.08);
    }

    .glossario-termo {
        background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        padding: 10px 14px;
        font-size: 13px;
        font-weight: 700;
        color: #1e3a5f;
        border-bottom: 1px solid #e2e8f0;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .glossario-def {
        padding: 10px 14px;
    }

    .glossario-def p {
        font-size: 12px;
        color: #475569;
        margin: 0 0 6px;
        line-height: 1.5;
    }

    .glossario-def p:last-child {
        margin-bottom: 0;
    }

    .glossario-formula {
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        padding: 6px 12px;
        font-family: 'SF Mono', Consolas, monospace;
        font-size: 12px;
        color: #334155;
        margin: 6px 0;
        display: inline-block;
    }

    #modalRegras .modal-container {
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: modalSlideIn 0.3s ease;
        overflow: hidden;
    }

    .modal-overlay.active {
        display: flex;
    }

    /* ============================================
       A2★ — Grafico de 3 curvas no modal detalhe
       ============================================ */
    .metodo-selector-container {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
        flex-wrap: wrap;
    }

    .metodo-selector-container label {
        font-size: 12px;
        font-weight: 600;
        color: #334155;
        white-space: nowrap;
    }

    .metodo-selector-container .select2-container {
        min-width: 280px;
    }

    .metodo-score-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 10px;
        border-radius: 100px;
        font-size: 11px;
        font-weight: 700;
    }

    .metodo-score-badge.alta {
        background: #dcfce7;
        color: #166534;
    }

    .metodo-score-badge.media {
        background: #dbeafe;
        color: #1e40af;
    }

    .metodo-score-badge.baixa {
        background: #fef3c7;
        color: #92400e;
    }

    .grafico-container {
        position: relative;
        width: 100%;
        height: 280px;
        margin-bottom: 16px;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        padding: 12px;
    }

    .grafico-loading {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: rgba(248, 250, 252, 0.9);
        border-radius: 10px;
        z-index: 2;
    }

    .grafico-loading ion-icon {
        font-size: 28px;
        color: #3b82f6;
        animation: spin 1s linear infinite;
    }

    .grafico-loading p {
        font-size: 12px;
        color: #64748b;
        margin-top: 8px;
    }

    .grafico-legenda {
        display: flex;
        gap: 16px;
        justify-content: center;
        margin-top: 8px;
        flex-wrap: wrap;
    }

    .grafico-legenda-item {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 11px;
        color: #475569;
    }

    .grafico-legenda-dot {
        width: 12px;
        height: 3px;
        border-radius: 2px;
    }

    .grafico-legenda-dot.real {
        background: #f97316;
    }

    .grafico-legenda-dot.estimado {
        background: #22c55e;
        border: 1px dashed #22c55e;
    }

    .grafico-legenda-dot.corrigido {
        background: #3b82f6;
    }

    /* Metricas do metodo selecionado */
    .metodo-metricas {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 12px;
    }

    .metodo-metrica-item {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 8px 12px;
        text-align: center;
        min-width: 80px;
    }

    .metodo-metrica-item .mmv {
        font-size: 16px;
        font-weight: 700;
        color: #1e293b;
    }

    .metodo-metrica-item .mml {
        font-size: 10px;
        color: #94a3b8;
        margin-top: 2px;
    }

    /* Responsivo para grafico */
    @media (max-width: 768px) {
        .grafico-container {
            height: 220px;
        }

        .metodo-selector-container {
            flex-direction: column;
            align-items: flex-start;
        }

        .metodo-selector-container .select2-container {
            min-width: 100%;
            width: 100% !important;
        }

        .metodo-metricas {
            gap: 6px;
        }

        .metodo-metrica-item {
            min-width: 60px;
            padding: 6px 8px;
        }
    }

    /* ---- Badges de hora na tabela agrupada ---- */
    .horas-container {
        display: flex;
        flex-wrap: wrap;
        gap: 3px;
        max-width: 280px;
    }

    .badge-hora {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 600;
        font-family: monospace;
        min-width: 32px;
        text-align: center;
    }

    .badge-hora.hora-pendente {
        background: #fef3c7;
        color: #92400e;
        border: 1px solid #fbbf24;
    }

    .badge-hora.hora-tratada {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #86efac;
    }

    .badge-hora.hora-ignorada {
        background: #f1f5f9;
        color: #94a3b8;
        border: 1px solid #e2e8f0;
    }

    /* ---- Modal de detalhe do grupo ---- */
    .grupo-info-header {
        display: flex;
        gap: 16px;
        padding: 12px 16px;
        background: #f8fafc;
        border-radius: 8px;
        margin-bottom: 12px;
        border: 1px solid #e2e8f0;
    }

    .grupo-info-item {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .grupo-label {
        font-size: 10px;
        color: #94a3b8;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        font-weight: 600;
    }

    .grupo-valor {
        font-size: 13px;
        font-weight: 600;
        color: #1e293b;
    }

    /* ---- Lista de horas com checkboxes ---- */
    .grupo-horas-lista {
        margin-bottom: 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        overflow: hidden;
    }

    .grupo-horas-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
    }

    .chk-label-all {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        font-weight: 500;
        color: #475569;
        cursor: pointer;
    }

    .chk-label-all input[type="checkbox"] {
        width: 14px;
        height: 14px;
        accent-color: #3b82f6;
    }

    .grupo-horas-count {
        font-size: 11px;
        color: #64748b;
        font-weight: 500;
    }

    .grupo-horas-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 4px;
        padding: 8px;
    }

    .grupo-hora-item {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 5px 8px;
        border-radius: 6px;
        font-size: 12px;
        cursor: pointer;
        border: 1px solid #e2e8f0;
        transition: background 0.15s;
    }

    .grupo-hora-item:hover:not(.disabled) {
        background: #eff6ff;
        border-color: #93c5fd;
    }

    .grupo-hora-item.disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .grupo-hora-item input[type="checkbox"] {
        width: 14px;
        height: 14px;
        accent-color: #3b82f6;
    }

    .hora-label {
        font-weight: 600;
        font-family: monospace;
        color: #334155;
    }

    /* ---- Secao de metodo de correcao ---- */
    .grupo-metodo-section {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
        padding: 10px 12px;
        background: #eff6ff;
        border-radius: 8px;
        border: 1px solid #bfdbfe;
    }

    .grupo-metodo-label {
        font-size: 12px;
        font-weight: 600;
        color: #1e40af;
        white-space: nowrap;
    }

    .select-metodo-grupo {
        flex: 1;
        padding: 6px 10px;
        border: 1px solid #93c5fd;
        border-radius: 6px;
        font-size: 12px;
        color: #1e293b;
        background: white;
    }

    /* ---- Area do grafico ---- */
    .grupo-grafico-area {
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 12px;
        min-height: 200px;
        background: white;
    }

    /* ---- Botoes de acao do modal ---- */
    .btn-grupo-acao {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        border: none;
        cursor: pointer;
        transition: all 0.15s;
    }

    .btn-grupo-acao.todas {
        background: #3b82f6;
        color: white;
    }

    .btn-grupo-acao.todas:hover {
        background: #2563eb;
    }

    .btn-grupo-acao.selecionadas {
        background: #22c55e;
        color: white;
    }

    .btn-grupo-acao.selecionadas:hover {
        background: #16a34a;
    }

    .btn-grupo-acao.cancelar {
        background: #f1f5f9;
        color: #475569;
        border: 1px solid #e2e8f0;
    }

    .btn-grupo-acao.cancelar:hover {
        background: #e2e8f0;
    }

    .btn-grupo-acao:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* ---- Responsivo ---- */
    @media (max-width: 768px) {
        .grupo-info-header {
            flex-direction: column;
            gap: 8px;
        }

        .grupo-horas-grid {
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        }

        .horas-container {
            max-width: 200px;
        }

        .modal-footer {
            flex-wrap: wrap;
        }

        .btn-grupo-acao {
            flex: 1;
            justify-content: center;
            min-width: 140px;
        }

        .btn-grupo-acao.cancelar {
            margin-left: 0 !important;
            flex-basis: 100%;
        }

        .grupo-metodo-section {
            flex-direction: column;
            align-items: stretch;
        }
    }

    @media (max-width: 480px) {
        .grupo-horas-grid {
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        }
    }

    .regra-metodo-card.aberto .regra-metodo-body {
        display: block !important;
    }

    .regra-metodo-card.aberto .regra-metodo-header ion-icon[name="chevron-down-outline"] {
        transform: rotate(180deg);
    }

    .regra-metodo-body p {
        margin: 0;
        line-height: 1.5;
    }

    .regra-metodo-body code {
        background: #e2e8f0;
        padding: 1px 4px;
        border-radius: 3px;
        font-size: 11px;
    }

    .btn-info-regras {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 6px 12px;
        background: #eff6ff;
        color: #1e40af;
        border: 1px solid #93c5fd;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s;
    }

    .btn-info-regras:hover {
        background: #dbeafe;
        border-color: #3b82f6;
    }

    /* ============================================
   Abas do Modal de Regras
   ============================================ */
    .regras-tab-btn {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 8px 14px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 6px 6px 0 0;
        color: rgba(255, 255, 255, 0.7);
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
    }

    .regras-tab-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
    }

    .regras-tab-btn.active {
        background: white;
        color: #1e3a5f;
        border-color: white;
        font-weight: 600;
    }

    .regras-tab-btn ion-icon {
        font-size: 15px;
    }

    .regras-tab-pane {
        display: none;
    }

    .regras-tab-pane.active {
        display: block;
    }

    /* Acordeao dos metodos (reutilizado nas 3 abas) */
    .regra-metodo-card.aberto .regra-metodo-body {
        display: block !important;
    }

    .regra-metodo-card.aberto .regra-metodo-header ion-icon[name="chevron-down-outline"] {
        transform: rotate(180deg);
    }

    .regra-metodo-body p {
        margin: 0;
        line-height: 1.5;
    }

    .regra-metodo-body code {
        background: #e2e8f0;
        padding: 1px 4px;
        border-radius: 3px;
        font-size: 11px;
    }

    @media (max-width: 600px) {
        .regras-tabs {
            flex-wrap: wrap;
        }

        .regras-tab-btn {
            font-size: 11px;
            padding: 6px 10px;
            flex: 1;
            justify-content: center;
        }
    }